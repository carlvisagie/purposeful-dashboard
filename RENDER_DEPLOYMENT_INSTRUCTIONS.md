# Deploy to Render.com - Instructions

## Automatic Deployment (Recommended)

The repository is configured with `render.yaml` for automatic deployment.

### Steps:

1. **Go to Render Dashboard**
   - Visit: https://dashboard.render.com/
   - Sign in or create account

2. **Create New Web Service**
   - Click "New +" → "Web Service"
   - Connect your GitHub account if not already connected
   - Select repository: `carlvisagie/purposeful-dashboard`
   - Render will automatically detect `render.yaml`

3. **Configure (Auto-detected from render.yaml)**
   - **Name:** purposeful-live-coaching
   - **Environment:** Node
   - **Build Command:** `pnpm install && pnpm build`
   - **Start Command:** `NODE_ENV=production node dist/index.js`
   - **Plan:** Free

4. **Set Environment Variables**
   
   Required variables (some auto-generated):
   ```
   NODE_VERSION=22.13.0
   DATABASE_URL=[auto-generated by Render MySQL]
   JWT_SECRET=[auto-generated]
   VITE_APP_TITLE=Purposeful Live Coaching
   OAUTH_SERVER_URL=https://api.manus.im
   ```

   Optional (for payments):
   ```
   STRIPE_SECRET_KEY=[your-stripe-secret-key]
   STRIPE_PUBLISHABLE_KEY=[your-stripe-publishable-key]
   ```

5. **Create Database**
   - Render will create a free MySQL database automatically
   - Database name: `purposeful_coaching`

6. **Deploy**
   - Click "Create Web Service"
   - Render will build and deploy automatically
   - First deployment takes ~5-10 minutes

7. **Get Your URL**
   - After deployment: `https://purposeful-live-coaching.onrender.com`
   - Or custom domain if configured

## Manual Deployment (Alternative)

If you prefer manual setup:

1. **New Web Service**
   - Repository: `carlvisagie/purposeful-dashboard`
   - Branch: `main`

2. **Settings**
   - **Name:** purposeful-live-coaching
   - **Region:** Oregon (or closest to your users)
   - **Branch:** main
   - **Root Directory:** (leave blank)
   - **Environment:** Node
   - **Build Command:** `pnpm install && pnpm build`
   - **Start Command:** `NODE_ENV=production node dist/index.js`

3. **Advanced Settings**
   - **Auto-Deploy:** Yes
   - **Health Check Path:** `/`

4. **Add MySQL Database**
   - Go to "New +" → "MySQL"
   - Name: `purposeful-coaching-db`
   - Plan: Free
   - Copy the internal database URL

5. **Add Environment Variables**
   - In Web Service → Environment
   - Add all variables listed above
   - Use the MySQL internal URL for `DATABASE_URL`

## Post-Deployment

### Verify Deployment

1. Visit your Render URL
2. Check that landing page loads
3. Test AI coaching features
4. Verify database connection

### Enable Payments

1. Add Stripe live keys to environment variables
2. Redeploy (automatic if auto-deploy is on)
3. Test payment flow

### Custom Domain (Optional)

1. Go to Settings → Custom Domains
2. Add your domain
3. Configure DNS records as shown
4. SSL certificate auto-generated

## Monitoring

- **Logs:** Available in Render dashboard
- **Metrics:** CPU, memory, bandwidth
- **Health Checks:** Automatic ping to `/`

## Troubleshooting

### Build Fails

- Check build logs in Render dashboard
- Verify `pnpm` is available
- Check Node version (22.13.0)

### Database Connection Errors

- Verify `DATABASE_URL` is set correctly
- Check database is running
- Run migrations: `pnpm db:push`

### App Won't Start

- Check start command is correct
- Verify all required env variables are set
- Check logs for errors

## Free Tier Limits

- **Web Service:** 750 hours/month
- **Database:** 1GB storage, 1GB RAM
- **Bandwidth:** 100GB/month
- **Sleeps after 15 min inactivity** (spins up on request)

## Upgrade for Production

For 24/7 uptime without sleep:
- Upgrade to Starter plan ($7/month)
- Database: Starter plan ($7/month)
- Total: ~$14/month for always-on production

---

**Your platform will be live at:** `https://purposeful-live-coaching.onrender.com`

**Deployment time:** ~5-10 minutes for first deploy, ~2-3 minutes for updates.
